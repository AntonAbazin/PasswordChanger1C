<h1>Сброс паролей пользователей для файловой, клиент-серверной базы 1С и хранилища конфигураций</h1>

<b>Скачать скомпиллированную версию можно в разделе с релизами</b> - https://github.com/alekseybochkov/PasswordChanger1C/releases/

При утере паролей административных учеток к базам 1С есть разные варианты их восстановления. Если с клиент-серверными базами все просто, то с файловыми базами и хранилищем уже приходится использовать более сложные методы вплоть до ручного изменения определенных байтов в файлах.
Данное приложение на .NET, позволяет забыть об этих проблемах и менять пароли пользователей в пару кликов для файловых, клиент-серверных баз 1С, а также хранилища конфигураций.

<h2>Правила использования</h2>
Запрещается использование приложения для несанкционированного доступа к данным!
Используя данное приложение Вы подтверждаете, что базы данных, к которым будет предоставлен доступ, принадлежат Вашей организации и Вы являетесь Администратором с неограниченным доступом к информации этих баз данных.
Несанкционированный доступ к информации преследуются по ст. 1301 Гражданского кодекса РФ, ст. 7.12 Кодекса Российской Федерации об административных правонарушениях, ст. 146 Уголовного кодекса РФ.
               
<h3>Отказ от ответственности</h3>
<p>Внутренний формат файловой базы 1С не документирован, поэтому алгоритмы основываются на предположениях и догадках. Корректная работа приложения не гарантируется. <br />Используя приложение вы принимаете на себя всю ответственность и риски за некорректную работу алгоритмов и повреждение баз данных.<br />Проверяйте в первую очередь на копии, а перед использованием на рабочей версии делайте бэкапы.</p>
<h3>Благодарность</h3>
<p>Огромная благодарность <a href="http://infostart.ru/profile/13819/" target="_blank">Валерию Агееву</a> за его работу по разбору внутренних форматов 1С и утилиту <a href="http://infostart.ru/public/19633/" target="_blank">Tool_1CD</a>.<a href="http://infostart.ru/public/19734/" target="_blank"><br />Краткое описание формата файлов *.1CD (файловых баз 1Сv8)</a></p>
<p>Спасибо <a href="http://infostart.ru/profile/442433/" target="_blank">Pavel Fomin</a> за работу по анализу изменений в 8.3.8 - <a href="http://infostart.ru/public/536343/" target="_blank">Формат баз 1CD - классические и 8.3.8</a>.</p>

<h3>Принцип работы</h3>
<p>В клиент-серверном варианте список пользователей хранится в таблице V8USERS, а хеш пароля в зашифрованном виде в поле DATA.<br />Приложение дешифрует строку из поля DATA, заменяет оба хеша (первый обычный, второй для пароля в верхнем регистре) на хеш введенной строки, шифрует строку с тем же ключем и записывает бинарные данные для указанного пользователя обратно в таблицу V8USERS.<br />Доступ к базе не требует монопольного режима.</p>
<p>В файловом варианте информационной базы логическая структура данных и алгоритмы обработки аналогичны, но данные упакованы в соответствии с внутренним форматом 1С.<br />Таблица пользователей считывается целиком, производится изменение в нужных строках, затем вся таблица BLOB данных для всех пользователей перезаписывается в файл информационной базы.<br />Требуется монопольный доступ для открытия ИБ и записи данных в нее.</p>
<p>В хранилище конфигурации 1С список пользователей хранится в таблице USERS, а некий хеш пароля в поле PASSWORD. Т.к. я не разобрал что это за формат хеша, то сделал только возможность установить пустой пароль (это фиксированная строка "d41d8cd98f00b204e9800998ecf8427e"). Таблица пользователей считывается целиком, производится изменение значений PASSWORD в нужных строках, затем вся таблица пользователей записывается в файл хранилища.<br />Требуется монопольный доступ для открытия ИБ и записи данных в нее.</p>
<h3>Скриншоты с примерами</h3>
<p>Файловая информационная база</p>
<p><img style="border: 1px solid black;" src="https://github.com/alekseybochkov/PasswordChanger1C/blob/master/PasswordChanger1C/screenshot1.png?raw=true" alt="" width="768" height="333" /></p>
<p>&nbsp;</p>
<p>Клиент-серверная информационная база</p>
<p><img style="border: 1px solid black;" src="https://github.com/alekseybochkov/PasswordChanger1C/blob/master/PasswordChanger1C/screenshot2.png?raw=true" alt="" width="768" height="398" /></p>
<p>&nbsp;</p>
<p>Хранилище конфигурации 1С</p>
<p><img style="border: 1px solid black;" src="https://github.com/alekseybochkov/PasswordChanger1C/blob/master/PasswordChanger1C/screenshot3.png?raw=true" alt="" width="768" height="450" /></p>
<p>&nbsp;</p>
<h3>Поддержка и развитие</h3>
<p>Предложения, вопросы, комментарии, а также обнаруженные ошибки оставляйте, пожалуйста, в Issues.</p>
